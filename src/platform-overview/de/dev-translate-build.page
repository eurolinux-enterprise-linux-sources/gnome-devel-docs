<?xml version="1.0" encoding="utf-8"?>
<page xmlns="http://projectmallard.org/1.0/" xmlns:its="http://www.w3.org/2005/11/its" type="topic" style="task" id="dev-translate-build" xml:lang="de">

  <info>
    <link type="next" xref="dev-translate-tools"/>
    <revision version="0.1" date="2013-06-19" status="review"/>

    <credit type="author">
      <name>Ekaterina Gerasimova</name>
      <email its:translate="no">kittykat3756@gmail.com</email>
      <years>2013</years>
    </credit>

    <include xmlns="http://www.w3.org/2001/XInclude" href="cc-by-sa-3-0.xml"/>

    <desc/>
  
    <mal:credit xmlns:mal="http://projectmallard.org/1.0/" type="translator copyright">
      <mal:name>Mario Blättermann</mal:name>
      <mal:email>mario.blaettermann@gmail.com</mal:email>
      <mal:years>2009-2012, 2016</mal:years>
    </mal:credit>
  
    <mal:credit xmlns:mal="http://projectmallard.org/1.0/" type="translator copyright">
      <mal:name>Christian Kirbach</mal:name>
      <mal:email>christian.kirbach@gmail.com</mal:email>
      <mal:years>2011, 2012, 2015</mal:years>
    </mal:credit>
  
    <mal:credit xmlns:mal="http://projectmallard.org/1.0/" type="translator copyright">
      <mal:name>Aljosha Papsch</mal:name>
      <mal:email>al@rpapsch.de</mal:email>
      <mal:years>2012</mal:years>
    </mal:credit>
  </info>

  <title>Einrichten Ihres Buildsystems für Übersetzungen</title>

  <links type="series" style="floatend">
    <title>Übersetzungen einrichten</title>
  </links> 

  <p>Sie sollten das Buildsystem Ihres Projekts so einrichten, dass es mit Übersetzungen umgehen kann.</p>

  <p>Erstellen Sie einen Unterordner namens <file>po/</file> in Ihrem Projektordner und listen Sie in der Datei <file>po/POTFILES.in</file> jene Dateien auf, die übersetzbare Zeichenketten enthalten. Dateien <em>ohne</em> übersetzbare Zeichenketten listen Sie in <file>po/POTFILES.skip</file> auf.</p>

  <p>Fügen Sie die folgenden Zeilen zur Datei <file>configure.ac</file> hinzu:</p>
  <code>
IT_PROG_INTLTOOL([0.50.0])
AC_SUBST([GETTEXT_PACKAGE], [$PACKAGE_TARNAME])
AC_DEFINE_UNQUOTED([GETTEXT_PACKAGE], ["$GETTEXT_PACKAGE"], [Package name for gettext])</code>

  <p>Fügen Sie die folgenden Zeilen zur Datei <file>Makefile.am</file> hinzu:</p>
  <code>
SUBDIRS = po
</code>
  <code>
AM_CPPFLAGS = -DPACKAGE_LOCALEDIR=\""$(datadir)/locale"\"
</code>
  <code>
@INTLTOOL_DESKTOP_RULE@
desktopdir = $(datadir)/applications
desktop_in_files = data/<input>applicationname</input>.desktop.in
desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
</code>

  <p>Führen Sie <cmd>intltoolize</cmd> aus, um die Build-Infrastruktur von intltool zum Build-Tree hinzuzufügen, bevor Sie <cmd>autoreconf</cmd> aufrufen.</p>

  <p>Ihre Buildsystem ist und Ihre Quellzeichenketten sind nun bereit für die Übersetzung. Sie müssen noch <app>gettext</app> über drei Dinge informieren:</p>

  <list>
    <item><p>die <em>translation domain</em>, im Allgemeinen der Name der Anwendung</p></item>
    <item><p>den Ort, wo die erstellten Übersetzungen installiert werden sollen</p></item>
    <item><p>und die Zeichenkodierung der Übersetzungen, allgemein UTF-8</p></item>
  </list>

  <example>
  <note>
    <p>Das Beispiel nimmt an, dass Ihre Anwendung in C geschrieben ist. Für andere Programmiersprachen wird es etwas abweichen.</p>
  </note>

  <p>Fügen Sie die folgende Zeile zu der Quelldatei hinzu, die Ihre <code>main()</code>-Funktion enthält:</p>

  <code>#include "config.h"</code>

  <p>Dann fügen Sie folgende Zeilen zur <code>main()</code>-Funktion hinzu:</p>

  <code>
bindtextdomain (GETTEXT_PACKAGE, PACKAGE_LOCALEDIR);
bind_textdomain_codeset (PACKAGE_TARNAME, "UTF-8");
textdomain (GETTEXT_PACKAGE);
</code>
  </example>

  <p>Rufen Sie <cmd>make <input>Projektname</input>.pot</cmd> im Ordner <file>po</file> auf. Dadurch extrahiert <cmd>intltool-extract</cmd> die übersetzbaren Zeichenketten und schreibt diese in eine po-Vorlage (POT-Datei).</p>

</page>
