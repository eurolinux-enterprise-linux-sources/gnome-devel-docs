<?xml version="1.0" encoding="utf-8"?>
<page xmlns="http://projectmallard.org/1.0/" xmlns:its="http://www.w3.org/2005/11/its" type="topic" style="task" id="dev-translate-build" xml:lang="es">

  <info>
    <link type="next" xref="dev-translate-tools"/>
    <revision version="0.1" date="2013-06-19" status="review"/>

    <credit type="author">
      <name>Ekaterina Gerasimova</name>
      <email its:translate="no">kittykat3756@gmail.com</email>
      <years>2013</years>
    </credit>

    <include xmlns="http://www.w3.org/2001/XInclude" href="cc-by-sa-3-0.xml"/>

    <desc/>
  
    <mal:credit xmlns:mal="http://projectmallard.org/1.0/" type="translator copyright">
      <mal:name>Daniel Mustieles</mal:name>
      <mal:email>daniel.mustieles@gmail.com</mal:email>
      <mal:years>2011-2017</mal:years>
    </mal:credit>
  
    <mal:credit xmlns:mal="http://projectmallard.org/1.0/" type="translator copyright">
      <mal:name>Jorge González</mal:name>
      <mal:email>jorgegonz@svn.gnome.org</mal:email>
      <mal:years>2007-2010</mal:years>
    </mal:credit>
  
    <mal:credit xmlns:mal="http://projectmallard.org/1.0/" type="translator copyright">
      <mal:name>Mario Carrión</mal:name>
      <mal:email>mario@monouml.org</mal:email>
      <mal:years>2006</mal:years>
    </mal:credit>
  </info>

  <title>Configurar el sistema de construcción para soportar traducciones</title>

  <links type="series" style="floatend">
    <title>Configurar las traducciones</title>
  </links> 

  <p>Deberá configurar su proyecto y su sistema de construcción para que funcione con las traducciones.</p>

  <p>Cree una subcarpeta <file>po/</file> en la carpeta del proyecto e incluya los archivos que tienen cadenas traducibles en el archivo <file>po/POTFILES.in</file>. Los archivos <em>sin</em> cadenas traducibles se listan en el archivo <file>po/POTFILES.skip</file>.</p>

  <p>añadir las siguientes líneas a su archivo <file>configure.ac</file>:</p>
  <code>
IT_PROG_INTLTOOL([0.50.0])
AC_SUBST([GETTEXT_PACKAGE], [$PACKAGE_TARNAME])
AC_DEFINE_UNQUOTED([GETTEXT_PACKAGE], ["$GETTEXT_PACKAGE"], [Package name for gettext])</code>

  <p>añadir las siguientes líneas a su archivo <file>Makefile.am</file>:</p>
  <code>
SUBDIRS = po
</code>
  <code>
AM_CPPFLAGS = -DPACKAGE_LOCALEDIR=\""$(datadir)/locale"\"
</code>
  <code>
@INTLTOOL_DESKTOP_RULE@
desktopdir = $(datadir)/applications
desktop_in_files = data/<input>applicationname</input>.desktop.in
desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
</code>

  <p>Ejecutar <cmd>intltoolize</cmd> para copiar la infraestructura de construcción de intltool al árbol de construcción antes de ejecutar <cmd>autoreconf</cmd>.</p>

  <p>Ahora que el sistema de construcción y las cadenas originales están listas para la traducción, debe indicar tres cosas a <app>gettext</app>:</p>

  <list>
    <item><p>el <em>dominio de traducción</em>, generalmente el mismo que el nombre de la aplicación</p></item>
    <item><p>la ubicación en la que se instalarán las traducciones construidas</p></item>
    <item><p>la codificación de caracteres, generalmente UTF-8</p></item>
  </list>

  <example>
  <note>
    <p>Este ejemplo asume que su aplicación está escrita en C. Será ligeramente diferente para otros lenguajes de programación</p>
  </note>

  <p>Añadir la siguiente línea al archivo fuente que contiene la función <code>main()</code>:</p>

  <code>#include "config.h"</code>

  <p>Ahora, añada las siguientes líneas a su función <code>main()</code>:</p>

  <code>
bindtextdomain (GETTEXT_PACKAGE, PACKAGE_LOCALEDIR);
bind_textdomain_codeset (PACKAGE_TARNAME, "UTF-8");
textdomain (GETTEXT_PACKAGE);
</code>
  </example>

  <p>Ejecute <cmd>make <input>nombre_proyecto</input>.pot</cmd> en la carpeta <file>po</file>. Esto ejecuta <cmd>intltool-extract</cmd> para extraer las cadenas traducibles y generar un archivo PO de plantilla (POT).</p>

</page>
