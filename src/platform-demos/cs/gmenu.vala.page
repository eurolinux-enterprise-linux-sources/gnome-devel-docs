<?xml version="1.0" encoding="utf-8"?>
<page xmlns="http://projectmallard.org/1.0/" xmlns:its="http://www.w3.org/2005/11/its" xmlns:xi="http://www.w3.org/2001/XInclude" type="guide" style="task" id="gmenu.vala" xml:lang="cs">
  <info>
  <title type="text">GMenu (Vala)</title>
	  <link type="guide" xref="beginner.vala#menu-combo-toolbar"/>
	  <link type="seealso" xref="aboutdialog.vala"/>
    <revision version="0.1" date="2012-04-07" status="stub"/>

    <credit type="author copyright">
      <name>Ryan Lortie</name>
      <email its:translate="no">desrt@desrt.ca</email>
      <years>2012</years>
   </credit>

    <credit type="author">
      <name>Tiffany Antopolski</name>
      <email its:translate="no">tiffany.antopolski@gmail.com</email>
    </credit>

    <desc>Jednoduchá implementace GMenuModel</desc>
  </info>

  <title>GMenu</title>
    <media type="image" mime="image/png" height="200" src="media/gmenu.vala.png"/>
    <note style="important">
       <p><em style="strong">Musíte používat GTK+ 3.4 nebo novější, aby tento příklad fungoval.</em></p>
    </note>
    <p>GtkApplication s jednoduchým widgetem GMenu a objekty SimpleAction</p>

<code mime="text/x-csharp" style="numbered">/* Okno v aplikaci */
public class Window : Gtk.ApplicationWindow {

	/* Konstruktor */
	public Window (Application app) {
		Object (application: app, title: "Gmenu Example");

		var about_action = new SimpleAction ("about", null);

		/* Napojí signál "activate" na obsluhu 
		 * signálu (neboli funkci zpětného volání)
		 */
		about_action.activate.connect (this.about_cb);

		/* Přidá akci do tohoto okna */
		this.add_action (about_action);

		this.show ();
	}

	/* Zpracování signálu pro signál "activate"' od SimpleAction */
	void about_cb (SimpleAction simple, Variant? parameter) {
		print ("This does nothing.  It is only a demonstration.\n");
	}
}

/* Toto je aplikace */
public class Application : Gtk.Application {

	/* Konstruktor */
	public Application () {
		Object (application_id: "org.example.application");
	}

	/* Přepíše signál "activate" z GLib.Application */
	protected override void activate () {

		/* Vytvoří nové okno pro tuto aplikaci */
		new Window (this);
	}

	/* Přepíše signál "startup" z GLib.Application */
	protected override void startup () {
		base.startup ();

		var menu = new Menu ();
		menu.append ("About", "win.about");
		menu.append ("Quit", "app.quit");
		this.app_menu = menu;

		var quit_action = new SimpleAction ("quit", null);
		quit_action.activate.connect (this.quit);
		this.add_action (quit_action);
	}
}

/* Funkce main vytvoří aplikaci a spustí ji */
int main (string[] args) {
	return new Application ().run (args);
}
</code>
<p>V této ukázce se používá následující:</p>
<list>
  <item><p><link href="http://www.valadoc.org/gtk+-3.0/Gtk.Application.html">Gtk.Application</link></p></item>
  <item><p><link href="http://www.valadoc.org/gtk+-3.0/Gtk.ApplicationWindow.html">Gtk.ApplicationWindow</link></p></item>
  <item><p><link href="http://www.valadoc.org/gio-2.0/GLib.Menu.Menu.html">Menu</link></p></item>
  <item><p><link href="http://www.valadoc.org/gio-2.0/GLib.Menu.append.html">append</link></p></item>
  <item><p><link href="http://www.valadoc.org/gio-2.0/GLib.SimpleAction.html">SimpleAction</link></p></item>
  <item><p><link href="http://www.valadoc.org/gio-2.0/GLib.ActionMap.add_action.html">add_action</link></p></item>
</list>
</page>
